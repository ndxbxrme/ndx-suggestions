{
  "version": 3,
  "file": "index.js",
  "sourceRoot": "../src/",
  "sources": [
    "index.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\r\nmodule = null\r\ntry\r\n  module = angular.module 'ndx'\r\ncatch e\r\n  module = angular.module 'ndx', []\r\nmodule.directive 'suggestions', ->\r\n  restrict: 'A'\r\n  require: 'ngModel'\r\n  scope:\r\n    suggestions: '='\r\n    select: '='\r\n  link: (scope, elem, attrs, ctrl) ->\r\n    elem[0].setAttribute 'autocomplete', 'nope'\r\n    holder = elem.wrap '<div class=\"suggestions-holder\"></div>'\r\n    sizer = $('<div class=\"sizer\"></div>')\r\n    sizer.insertBefore elem\r\n    suggestor = $('<div class=\"suggestor\"></div>')\r\n    suggestor.insertBefore elem\r\n    suggestions = $('<div class=\"suggestions hidden\"></div>')\r\n    suggestions.insertBefore elem\r\n    options = $('<ul class=\"options\"></ul>')\r\n    suggestions.append options\r\n    lastVal = elem.val()\r\n    mysuggestions = []\r\n    field = attrs.field or 'name'\r\n    inputHeight = elem.height()\r\n    inputBorderTop = parseInt elem.css('border-top-width')\r\n    inputBorderLeft = parseInt elem.css('border-left-width')\r\n    inputPaddingTop = parseInt elem.css('padding-top')\r\n    inputPaddingLeft = parseInt elem.css('padding-left')\r\n    inputFontFamily = elem.css('font-family')\r\n    inputFontSize = elem.css('font-size')\r\n    inputFontWeight = elem.css('font-weight')\r\n    suggestorMarginTop = parseInt suggestor.css('margin-top')\r\n    suggestor.css\r\n      height: (inputHeight - (2 * suggestorMarginTop)) + 'px'\r\n      lineHeight: (inputHeight - (2 * suggestorMarginTop)) + 'px'\r\n      marginLeft: (inputPaddingLeft + inputBorderLeft) + 'px'\r\n      marginTop: (suggestorMarginTop + inputBorderTop) + 'px'\r\n      fontFamily: inputFontFamily\r\n      fontSize: inputFontSize\r\n      fontWeight: inputFontWeight\r\n    sizer.css\r\n      fontFamily: inputFontFamily\r\n      fontSize: inputFontSize\r\n      fontWeight: inputFontWeight\r\n    render = (isServer) ->\r\n      i = 0\r\n      options.html('')\r\n      if elem.val()\r\n        for thing in mysuggestions\r\n          r = RegExp '.*' + elem.val() + '.*', 'i'\r\n          if isServer or r.test thing\r\n            r = RegExp '^' + elem.val(), 'i'\r\n            li = $ '<li>' + thing + '</li>'\r\n            options.append li\r\n            if i++ is 0\r\n              if r.test thing\r\n                suggestor.text thing.substr elem.val().length\r\n                li.addClass 'selected'\r\n              else\r\n                suggestor.text ''\r\n        if i is 0\r\n          suggestor.text ''\r\n          suggestions.addClass 'hidden'\r\n        else\r\n          suggestions.removeClass 'hidden'\r\n        suggestions.removeClass 'scrollY'\r\n        if options.height() > suggestions.height()\r\n          suggestions.addClass 'scrollY'\r\n    doSelect = (text) ->\r\n      if scope.select\r\n        item = null\r\n        for suggestion in scope.suggestions\r\n          if suggestion[field] is text\r\n            item = suggestion\r\n            break\r\n        scope.select item\r\n      else\r\n        elem.val text\r\n        ctrl.$setViewValue text\r\n      options.html ''\r\n      suggestor.text ''\r\n      suggestions.addClass 'hidden'\r\n    deref = scope.$watch 'suggestions', (n, o) ->\r\n      if n\r\n        mysuggestions = []\r\n        for item in n\r\n          if mysuggestions.indexOf(item[field]) is -1\r\n            mysuggestions.push item[field]\r\n        mysuggestions.sort()\r\n        if n isnt o\r\n          render true\r\n      else\r\n        mysuggestions = []\r\n    scope.$on '$destroy', ->\r\n      deref()\r\n    suggestions.bind 'mousedown', (e) ->\r\n      $('li.selected', suggestions).removeClass 'selected'\r\n      doSelect $(e.target).text()\r\n    elem.bind 'blur', ->\r\n      if selectedText = $('li.selected', suggestions).text()\r\n        doSelect selectedText\r\n      options.html ''\r\n      suggestor.text ''\r\n      suggestions.addClass 'hidden'\r\n    elem.bind 'keydown', (e) ->\r\n      switch e.keyCode\r\n        when 38\r\n          #key up\r\n          selected = $('li.selected', suggestions)\r\n          if selected.length\r\n            if selected[0].previousSibling\r\n              prev = $(selected[0].previousSibling)\r\n              $('li.selected', suggestions).removeClass 'selected'\r\n              prev.addClass 'selected'\r\n              elem.val prev.text()\r\n              suggestor.text ''\r\n              if prev.offset().top < suggestions.offset().top\r\n                prev[0].scrollIntoView()\r\n        when 40\r\n          #key down\r\n          selected = $('li.selected', suggestions)\r\n          if selected.length\r\n            if selected[0].nextSibling\r\n              next = $(selected[0].nextSibling)\r\n              $('li.selected', suggestions).removeClass 'selected'\r\n              next.addClass 'selected'\r\n              elem.val next.text()\r\n              suggestor.text ''\r\n              if next.offset().top > suggestions.offset().top + suggestions.height()\r\n                next[0].scrollIntoView()\r\n          else\r\n            li = $('li', suggestions)[0]\r\n            if li\r\n              $(li).addClass 'selected'\r\n              elem.val $(li).text()\r\n              suggestor.text ''\r\n        when 8\r\n          if suggestor.text()\r\n            suggestor.text ''\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n            e.cancelBubble = true\r\n    elem.bind 'keyup', (e) ->\r\n      if elem.val() isnt lastVal\r\n        lastVal = elem.val()\r\n        valChanged = true\r\n      sizer.html elem.val().replace(/\\s/g, '&nbsp;')\r\n      suggestor.css\r\n        left: sizer.width()\r\n      switch e.keyCode\r\n        when 38, 40\r\n          true\r\n        else\r\n          if valChanged and not attrs.server\r\n            render()\r\n      if e.keyCode is 8\r\n        suggestor.text ''\r\n        $('li.selected', suggestions).removeClass 'selected'\r\n      else if e.keyCode is 46\r\n        suggestor.text ''\r\n        $('li.selected', suggestions).removeClass 'selected'\r\n"
  ]
}